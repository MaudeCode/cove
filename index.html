<!doctype html>
<html lang="en" style="background:#0a0a0b">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="A cozy WebUI for OpenClaw chat" />
    <meta name="theme-color" content="#0a0a0b" />
    <title>Cove - OpenClaw WebUI</title>
    
    <!-- Theme initialization - runs before anything else -->
    <script>
      (function(){
        var PREF_KEY='cove:theme-preference';
        var CACHE_KEY='cove:theme-cache';
        var LIGHT={"--color-bg-primary":"#ffffff","--color-bg-secondary":"#f9fafb","--color-bg-surface":"#ffffff","--color-text-primary":"#111827","--color-text-secondary":"#4b5563","--color-accent":"#2563eb","--color-border":"#e5e7eb"};
        var DARK={"--color-bg-primary":"#0a0a0b","--color-bg-secondary":"#111113","--color-bg-surface":"#1f1f23","--color-text-primary":"#fafafa","--color-text-secondary":"#a1a1aa","--color-accent":"#3b82f6","--color-border":"#27272a"};
        var root=document.documentElement;
        
        try{
          var pref=JSON.parse(localStorage.getItem(PREF_KEY)||'{}');
          var selected=pref.selected||'system';
          var cached=JSON.parse(localStorage.getItem(CACHE_KEY)||'null');
          var colors=null;
          var appearance='dark';
          
          if(selected==='system'){
            var prefersDark=window.matchMedia('(prefers-color-scheme:dark)').matches;
            var themeId=prefersDark?(pref.darkTheme||'dark'):(pref.lightTheme||'light');
            if(cached&&cached.id===themeId){
              colors=cached.colors;
              appearance=cached.appearance;
            }else{
              colors=themeId==='light'?LIGHT:DARK;
              appearance=themeId==='light'?'light':'dark';
            }
          }else{
            if(cached&&cached.id===selected){
              colors=cached.colors;
              appearance=cached.appearance;
            }else if(selected==='light'){
              colors=LIGHT;
              appearance='light';
            }else{
              colors=DARK;
              appearance='dark';
            }
          }
          
          // Apply colors and background immediately
          if(colors){
            var bg=colors['--color-bg-primary'];
            root.style.background=bg;
            root.setAttribute('data-appearance',appearance);
            for(var k in colors){
              root.style.setProperty(k,colors[k]);
            }
          }
        }catch(e){
          // Keep default dark background on error
        }
      })();
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
